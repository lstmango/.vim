<?php
/*
 *新派单&招标流程接口
 *lsTMango
 *2015-09-21
 */

class zbj_lib_ApiHttpClient {
    	
	//api地址
	private $apiUrl;
	private $appid;
	private $sign;
	private $stamp;
	private $service;
	private $method;
	//post数据参数
	private $param;
	
	/*
	 *构造函数
	 */
	public function __construct($initData) {
		$this->apiUrl=zbj_lib_Constant::WORK_TRACK_URL."/api";
		$postdata['sign']='zbjsign';
		$postdata['stamp']=time();
		$this->curlPost=$postdata;
		$postdata['appid']=$initData['appid'];
		$postdata['service']=$initData['service'];
		$postdata['method']=$initData['method'];
		$postdata['param']=$initData['param'];
		if($initData['_d']==1) $this->debug=1;
		$this->curlPost=$postdata;
	}

	
	/*
	 *post数据
	 */
	public function execute(){
		if($this->debug==1){
			var_dump($this->curlPost);
		}
		$data=zbj_lib_BaseUtils::file_get_contents_safe($this->apiUrl,$this->curlPost,'POST',5);
		return $data;
	}
	
}

