namespace * com.zhubajie.boss.interfaces

include "../dataobject/bossbase.thrift"
include "../dataobject/bschance.thrift"
include "../../union/dataobject/ChanceStat.thrift"
service bschanceService{
	#托管机会
	#增加联系人到平台用户的绑定
	bossbase.execResult AddCt2U(1: bschance.CtToU ctToU),
	#请求解封
#	Base.actionResultDO RequestCancelFrezze(1: i64 cb_id, 2: string reason, 3: i64 cancel_freeze_time),
	#解封
#	Base.actionResultDO CancelFrezze(1: i64 cb_id, 2: string reason, 3: i64 cancel_freeze_time),
	#获取提现或者未提现列表
#	Base.DbListResultDO GetWithDrawList(1: i64 cb_id, 2: Chance.WithDrawFilter withDrawFilter, 3: i32 withDrawType),
	#获取各种分组统计信息
#	Base.DbListResultDO GetCountInfo(1:Chance.GroupByFilter groupByFilter),
    #创建业务和联系人绑定
    bossbase.execResult CreateBusinessContactor(1:bschance.ContactorDO contactorDO,2:ChanceStat.ChanceStatInsertDTO ChanceStatInsertDTO),
    #获取业务到联系人的绑定+++++++++++++++++++++
    bschance.DbListResultDO GetBussinessContactor(1:bschance.BusinessFilter businessFilter);
    #认领
    bossbase.execResult lockBussinessContactor(1: i32 bs_to_ct_id,2:i32 bossuser_id);
    #更新业务相关的微机会
    bossbase.execResult UpdateBussinessChance(1:bschance.ChanceBussinessDo chanceBussinessDo);
    #关联任务后将任务ID回写到cm_bstoct_task
    bossbase.execResult addtasktochance(1:i32 bs_to_ct_id,2:map<string,string> taskinfo);
    #跟进
    bossbase.execResult follow(1: bschance.FollowInfoDO follow_info);
    #获取商机跟进列表
    bschance.DbListResultDO getFollowLogList(1:i32 bs_to_ct_id,2:i32 page,3:i32 limit); 
    #商机排行榜列表
    bschance.DbListResultDO rankList(1: bschance.QueryCountDO queryParameter);
	
	#获取子来源
    bschance.DbListResultDO getsource();
    #获取没有分配的机会
    bschance.DbListResultDO getUnAllotChance(1:list<i32> config_ids,2:i32 page,3:i32 limit);
    #获取未跟进的机会
    bossbase.execResult checkUnAcceptByManager(1:i32 manager_id);
    #抢机会
    bschance.actionResultDO grabChance(1:bschance.grabParamsDO bschance);


    
	################统计相关#######
	# 统计创建机会数
    bossbase.execResult countCreateNum();
    # 统计分配机会数
    bossbase.execResult countAllotNum();
    # 统计跟进机会数
    bossbase.execResult countFollowNum();
    # 统计转化订单数
    bossbase.execResult countTaskNum();
    # 统计成交金额
    bossbase.execResult countDealAmount();
    # 统计
    bschance.actionResultDO chanceSummary(1: bschance.QueryParamsDO query_params);
    # 查询
    bschance.DbListResultDO query(1: bschance.QueryParamsDO query_params);
    # 机会详情
    bschance.actionResultDO chanceDetail(1: i32 bs_to_ct_id);
	#更新mk_bstock中options字段
    bossbase.execResult UpdateOptions(1:bschance.OptionsDO optionsitems);
    
    #根据手机号码查询相同跟进人
	bschance.actionResultDO getFollowUserByPhone(1:string phone);
	# 订单详情
    bschance.actionResultDO taskDetail(1: i32 task_id);
	bschance.DbListResultDO getBstoctidsByTaskId(1:list<i32> task_ids);
	
	
	
	#清空抢机会Redis回调
    bossbase.execResult delGrabChanceRedis(1:i32 bs_to_ct_id,2:i32 config_id);
    #查询redis
    bschance.RedisListDogetRedisChanceList(1:i32 config_id);
}
